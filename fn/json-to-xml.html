<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" itemscope="itemscope" itemtype="http://schema.org/WebPage">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta name="viewport" content="width=device-width,initial-scale=1.0" />
      <title>fn:json-to-xml</title>
      <link rel="stylesheet" href="../bootstrap/dist/css/bootstrap.min.css" />
      <link rel="stylesheet" href="../css/site.css" />
      <link rel="shortcut icon" href="../favicon.ico" />
   </head>
   <body>
      <header role="navigation">
         <nav class="container">
            <div class="col-md-9 breadcrumb-col">
               <ol class="breadcrumb" itemprop="breadcrumb">
                  <li><a href="../">XPath Reference</a></li>
                  <li class="active">fn:json-to-xml</li>
               </ol>
            </div>
            <div class="col-md-3 search-col">
               <form method="get" action="https://cse.google.com/cse"><input type="hidden" name="cx" value="012329136009221431645:sv1eakamyny" /><div class="input-group"><input type="search" name="q" class="form-control" placeholder="Search" /><span class="input-group-btn"><button class="btn btn-default" type="button"><i class="glyphicon glyphicon-search"></i></button></span></div>
               </form>
            </div>
         </nav>
      </header>
      <article class="container" itemscope="itemscope" itemtype="http://schema.org/WebPageElement" itemprop="mainContentOfPage">
         <header>
            <h1 class="page-header">fn:json-to-xml</h1>
         </header>
         <p>Parses a string supplied in the form of a JSON text, returning the results in the
            form
            of an XML document node.
         </p>
         <section>
            <header>
               <h2>Signatures</h2>
            </header><pre><code class="signature"><span class="function">fn:json-to-xml</span><span class="parenthesis">(</span><span class="variable">$json-text</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span><span class="quantifier">?</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="node-type">document-node</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">?</span></code></pre><pre><code class="signature"><span class="function">fn:json-to-xml</span><span class="parenthesis">(</span><span class="whitespace">&#xD;
    </span><span class="variable">$json-text</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span><span class="quantifier">?</span><span class="op">,</span><span class="whitespace"> &#xD;
    </span><span class="variable">$options</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="node-type">map</span><span class="parenthesis">(</span><span class="quantifier">*</span><span class="parenthesis">)</span><span class="whitespace">&#xD;
</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="node-type">document-node</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">?</span></code></pre></section>
         <section>
            <header>
               <h2>Properties</h2>
            </header>
            <p>This function is <a href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic">nondeterministic</a>, <a href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent">context-dependent</a>,  and <a href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent">focus-independent</a>.  It depends on 
               		static base URI.
               	
            </p>
         </section>
         <section>
            <header>
               <h2>Rules</h2>
            </header>
            <p>The effect of the one-argument form of this function is the same as calling the
               two-argument form with an empty map as the value of the <code>$options</code>
               argument.
            </p>
            <p>The first argument is a JSON-text as defined in <a href="http://www.rfc-editor.org/rfc/rfc7159.txt">[RFC 7159]</a>, in the form of a string. The function
               parses this string to return an XDM node.
            </p>
            <p>If <code>$json-text</code> is an empty sequence, the function returns the empty sequence.
            </p>
            <p>The <code>$options</code> argument can be used to control the way in which the parsing
               takes place. The <a href="https://www.w3.org/TR/xpath-functions-31/#option-parameter-conventions">option parameter conventions</a> apply.
            </p>
            <p>The entries that may appear in the <code>$options</code> map are as follows:
            </p>
            <table class="table">
               <thead>
                  <tr>
                     <th>Key</th>
                     <th>Value</th>
                     <th>Meaning</th>
                  </tr>
               </thead>
               <tr>
                  <td rowspan="3"><code>liberal</code></td>
                  <td colspan="2">Determines whether deviations from the syntax of RFC7159 are permitted.
                     <ul>
                        <li>
                           <p>Type: <code>xs:boolean</code></p>
                        </li>
                        <li>
                           <p>Default: <code>false</code></p>
                        </li>
                     </ul>
                  </td>
               </tr>
               <tr>
                  <td><code>false</code></td>
                  <td>
                     The input <b>must</b> consist of an optional byte order mark (which is ignored) followed by a string
                     that conforms to the grammar of <code>JSON-text</code> in <a href="http://www.rfc-editor.org/rfc/rfc7159.txt">[RFC 7159]</a>. An error <b>must</b> be raised
                     (see below) if the input does not conform to the grammar.
                     
                  </td>
               </tr>
               <tr>
                  <td><code>true</code></td>
                  <td>
                     The input <b>may</b> contain deviations from the grammar of <a href="http://www.rfc-editor.org/rfc/rfc7159.txt">[RFC 7159]</a>,
                     which are handled in an <a href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined">implementation-defined</a> way. (Note: some popular
                     extensions include allowing quotes on keys to be omitted, allowing a comma
                     to appear after the last item in an array, allowing leading zeroes in numbers, and
                     allowing control characters such as
                     tab and newline to be present in unescaped form.) Since the extensions accepted
                     are implementation-defined, an error <b>may</b> be raised
                     (see below) if the input does not conform to the grammar.
                     
                  </td>
               </tr>
               <tr>
                  <td rowspan="4"><code>duplicates</code></td>
                  <td colspan="2">Determines the policy for handling duplicate keys in a JSON object.
                     To determine whether keys are duplicates, they are compared using the Unicode codepoint
                     collation, after expanding escape
                     sequences, unless the <code>escape</code> option is set to <code>true</code>, in which
                     case keys are compared in escaped form. 
                     
                     <ul>
                        <li>
                           <p>Type: <code>xs:string</code></p>
                        </li>
                        <li>
                           <p>Default: <code>If validate is true then reject, otherwise retain.</code></p>
                        </li>
                     </ul>
                  </td>
               </tr>
               <tr>
                  <td><code>reject</code></td>
                  <td>
                     An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0003">ERRFOJS0003</a>] if duplicate keys are encountered.
                     
                  </td>
               </tr>
               <tr>
                  <td><code>use-first</code></td>
                  <td>
                     If duplicate keys are present in a JSON object, all but the first of a set of duplicates
                     are ignored.
                     
                  </td>
               </tr>
               <tr>
                  <td><code>retain</code></td>
                  <td>
                     If duplicate keys are present in a JSON object, the XML result of the function will
                     also contain duplicates (making
                     it invalid against the schema). This value is therefore incompatible with the option
                     <code>validate=true</code> 
                     [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0005">ERRFOJS0005</a>]
                     
                  </td>
               </tr>
               <tr>
                  <td rowspan="3"><code>validate</code></td>
                  <td colspan="2">Determines whether the generated XML tree is schema-validated.
                     <ul>
                        <li>
                           <p>Type: <code>xs:boolean</code></p>
                        </li>
                        <li>
                           <p>Default: <code>Implementation-defined.</code></p>
                        </li>
                     </ul>
                  </td>
               </tr>
               <tr>
                  <td><code>true</code></td>
                  <td>
                     Indicates that the resulting XDM instance must be typed; that is, the element
                     and attribute nodes must carry the type annotations that result from validation
                     against the schema given at <a href="https://www.w3.org/TR/xpath-functions-31/#schema-for-json">Schema for the result of fn:json-to-xml</a>, or against an
                     <a href="https://www.w3.org/TR/xpath-functions-31/#dt-implementation-defined">implementation-defined</a> schema 
                     if the <code>liberal</code> option has the value <code>true</code>.
                     
                  </td>
               </tr>
               <tr>
                  <td><code>false</code></td>
                  <td>
                     Indicates that the resulting XDM instance must be untyped.
                     
                  </td>
               </tr>
               <tr>
                  <td rowspan="3"><code>escape</code></td>
                  <td colspan="2">Determines whether special characters are represented in the XDM output 
                     in backslash-escaped form. 
                     <ul>
                        <li>
                           <p>Type: <code>xs:boolean</code></p>
                        </li>
                        <li>
                           <p>Default: <code>false</code></p>
                        </li>
                     </ul>
                  </td>
               </tr>
               <tr>
                  <td><code>false</code></td>
                  <td>
                     All characters in the input that are valid
                     in the version of XML supported by the implementation, whether or not they are represented
                     
                     in the input by means of an escape sequence, are represented as unescaped characters
                     in the result. Any
                     characters or codepoints that are not valid XML characters 
                     (for example, unpaired surrogates) are passed to the <code>fallback</code> function
                     as described below; in the absence of a fallback function, they are replaced by
                     the Unicode <code>REPLACEMENT CHARACTER</code> (<code>xFFFD</code>).
                     The attributes <code>escaped</code> and <code>escaped-key</code> will not be present in the XDM output.
                     
                  </td>
               </tr>
               <tr>
                  <td><code>true</code></td>
                  <td>
                     JSON escape sequences are used in the result to represent special characters in the
                     JSON input, as defined below, 
                     whether or not they were represented using JSON escape sequences in the input.
                     The characters that are considered "special" for this purpose are:
                     
                     <ul>
                        <li>
                           <p>all codepoints in the range <code>x00</code> to <code>x1F</code> 
                              or <code>x7F</code> to <code>x9F</code>;
                           </p>
                        </li>
                        <li>
                           <p>all codepoints that do not represent characters that are valid in the version of XML
                              supported by the processor,
                              including codepoints representing unpaired surrogates;
                           </p>
                        </li>
                        <li>
                           <p>the backslash character itself (<code>x5C</code>).
                           </p>
                        </li>
                     </ul>
                     
                     Such characters are represented using a two-character
                     escape sequence where available (for example, <code>\t</code>), or a six-character escape sequence otherwise
                     (for example <code>\uDEAD</code>). Characters other than these will not be escaped in the result,
                     even if they were escaped in the input. In the result:
                     
                     
                     <ul>
                        <li>
                           <p>Any <code>string</code> element whose string value contains a
                              backslash character must have the attribute value <code>escaped="true"</code>.
                           </p>
                        </li>
                        <li>
                           <p>Any element that contains a <code>key</code> attribute whose string value
                              contains a backslash character must have the attribute
                              <code>escaped-key="true"</code>.
                           </p>
                        </li>
                        <li>
                           <p>The values of the <code>escaped</code> and
                              <code>escaped-key</code> attributes are immaterial when there is no backslash
                              present, and it is never necessary to include either attribute when its value
                              is <code>false</code>.
                           </p>
                        </li>
                     </ul>
                     
                  </td>
               </tr>
               <tr>
                  <td rowspan="2"><code>fallback</code></td>
                  <td colspan="2">
                     Provides a function which is called when the input contains an escape sequence 
                     that represents a character that is not valid in the version of XML
                     supported by the implementation. 
                     
                     It is an error to supply the <code>fallback</code> option if the <code>escape</code> option is present
                     with the value <code>true</code>.
                     
                     <ul>
                        <li>
                           <p>Type: <code>function(xs:string) as xs:string</code></p>
                        </li>
                        <li>
                           <p>Default: <code>The default is effectively the function function($s){"&amp;#xFFFD;"}: that is,
                                 a function that replaces the escape sequence with the Unicode REPLACEMENT CHARACTER.</code></p>
                        </li>
                     </ul>
                  </td>
               </tr>
               <tr>
                  <td><code>User-supplied function</code></td>
                  <td>
                     The function is called when the JSON input contains an escape sequence that is valid
                     according to the JSON 
                     grammar, but which does not represent a character that is valid in the version of
                     XML supported
                     by the processor. In the case of surrogates, the function is called once for any six-character
                     escape sequence
                     that is not properly paired with another surrogate. The string supplied 
                     as the argument will always be a two- or six- character escape
                     sequence, starting with a backslash, that conforms to the rules in the JSON grammar
                     (as extended by the
                     implementation if <code>liberal:true()</code> is specified): for example
                     <code>\b</code> or <code>\uFFFF</code> or <code>\uDEAD</code>. The function is not
                     called for an escape sequence that is invalid against the grammar (for example <code>\x0A</code>). 
                     The function returns a string
                     which is inserted into the result in place of the invalid character. The
                     function also has the option of raising a dynamic error by calling <code>fn:error</code>.
                     
                  </td>
               </tr>
            </table>
            <p>The various structures that can occur in JSON are transformed recursively to XDM values
               according to the rules given in <a href="https://www.w3.org/TR/xpath-functions-31/#json-to-xml-mapping">XML Representation of JSON</a>.
            </p>
            <p>The function returns a document node, whose only child
               is the element node representing the outermost construct in the JSON
               text.
            </p>
            <p>The function is <a href="https://www.w3.org/TR/xpath-functions-31/#">non-deterministic with respect to node identity</a>: that is, if the function is called twice with the same
               arguments, it is <a href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent">implementation-dependent</a> whether the same node is returned on both
               occasions.
            </p>
            <p>The base URI of the returned document node is taken from the static base URI of the
               function call.
            </p>
            <p>The choice of namespace prefix (or absence of a prefix) in the names of constructed
               nodes is <a href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependant">implementation-dependant</a>.
            </p>
            <p>The XDM tree returned by the function does not contain any
               unnecessary (albeit valid) nodes such as whitespace text nodes, comments, or processing
               instructions.
               It does not include any whitespace in the value of <code>number</code> or <code>boolean</code> 
               element nodes, or in the value of <code>escaped</code> or <code>escaped-key</code>
               attribute nodes.
            </p>
            <p>If the result is typed, every element named <code>string</code> will have an attribute named 
               <code>escaped</code> whose value is either <code>true</code> or <code>false</code>, and every element having 
               an attribute named <code>key</code> will also have an attribute named <code>escaped-key</code> whose value is either 
               <code>true</code> or <code>false</code>.
               
            </p>
            <p>If the result is untyped, the attributes <code>escaped</code> and <code>escaped-key</code> will 
               either be present with the value <code>true</code>, or will be absent. They will never be present with the value <code>false</code>.
            </p>
         </section>
         <section>
            <header>
               <h2>Error Conditions</h2>
            </header>
            <p>An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0001">ERRFOJS0001</a>] if the value of
               <code>$input</code> does not conform to the JSON grammar as defined
               by <a href="http://www.rfc-editor.org/rfc/rfc7159.txt">[RFC 7159]</a>, unless the option <code>"liberal":true()</code> is present and
               the processor chooses to accept the deviation. 
            </p>
            <p>An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0004">ERRFOJS0004</a>] if the value of
               the <code>validate</code> option is <code>true</code> and the processor does not support
               schema validation or typed data.
            </p>
            <p>An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0005">ERRFOJS0005</a>] if the value of
               <code>$options</code> includes an entry whose key is defined in this specification,
               and whose value is not a permitted value for that key.
            </p>
         </section>
         <section>
            <header>
               <h2>Notes</h2>
            </header>
            <p>To read a JSON file, this function can be used in conjunction with the
               <code>fn:unparsed-text</code> function.
            </p>
            <p>Many JSON implementations allow commas to be used after the last item in an object
               or
               array, although the specification does not permit it. The option
               <code>spec="liberal"</code> is provided to allow such deviations from the
               specification to be accepted. Some JSON implementations also allow constructors such
               as
               <code>new Date("2000-12-13")</code> to appear as values: specifying
               <code>spec="liberal"</code> allows such extensions to be accepted, but does not
               guarantee it. If such extensions are accepted, the resulting value is
               implementation-defined, and will not necessarily conform to the schema at <a href="https://www.w3.org/TR/xpath-functions-31/#schema-for-json">Schema for the result of fn:json-to-xml</a>.
            </p>
            <p>If the input starts with a byte order mark, this function ignores it. The byte order
               mark may have been added
               to the data stream in order to facilitate decoding of an octet stream to a character
               string, but since this function
               takes a character string as input, the byte order mark serves no useful purpose.
            </p>
            <p>The possibility of the input containing characters that are not valid in XML (for
               example, unpaired surrogates)
               arises only when such characters are expressed using JSON escape sequences. The is
               because the input to the function
               is an instance of <code>xs:string</code>, which by definition can only contain characters that are valid in XML.
            </p>
         </section>
         <section>
            <header>
               <h2>Examples</h2>
            </header>
            <p>The expression <code>json-to-xml('{"x": 1, "y": [3,4,5]}')</code> returns (with whitespace added for legibility):
            </p><pre><code><span class="es">&lt;</span><span class="en">map</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2005/xpath-functions</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="en">number</span><span class="z"> </span><span class="atn">key</span><span class="atneq">=</span><span class="z">"</span><span class="av">x</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="cl">number</span><span class="ec">&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="en">array</span><span class="z"> </span><span class="atn">key</span><span class="atneq">=</span><span class="z">"</span><span class="av">y</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
   </span><span class="es">&lt;</span><span class="en">number</span><span class="scx">&gt;</span><span class="txt">3</span><span class="ez">&lt;/</span><span class="cl">number</span><span class="ec">&gt;</span><span class="txt">
   </span><span class="es">&lt;</span><span class="en">number</span><span class="scx">&gt;</span><span class="txt">4</span><span class="ez">&lt;/</span><span class="cl">number</span><span class="ec">&gt;</span><span class="txt">
   </span><span class="es">&lt;</span><span class="en">number</span><span class="scx">&gt;</span><span class="txt">5</span><span class="ez">&lt;/</span><span class="cl">number</span><span class="ec">&gt;</span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">array</span><span class="ec">&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">map</span><span class="ec">&gt;</span><span class="txt"></span></code></pre><p>The expression <code>json-to-xml('"abcd"', map{'liberal': false()})</code> returns <code>&lt;string xmlns="http://www.w3.org/2005/xpath-functions"&gt;abcd&lt;/string&gt;</code>.
            </p>
            <p>The expression <code>json-to-xml('{"x": "\\", "y": "\u0025"}')</code> returns (with whitespace added for legibility):
            </p><pre><code><span class="es">&lt;</span><span class="en">map</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2005/xpath-functions</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="en">string</span><span class="z"> </span><span class="atn">key</span><span class="atneq">=</span><span class="z">"</span><span class="av">x</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">\</span><span class="ez">&lt;/</span><span class="cl">string</span><span class="ec">&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="en">string</span><span class="z"> </span><span class="atn">key</span><span class="atneq">=</span><span class="z">"</span><span class="av">y</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">%</span><span class="ez">&lt;/</span><span class="cl">string</span><span class="ec">&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">map</span><span class="ec">&gt;</span><span class="txt"></span></code></pre><p>The expression <code>json-to-xml('{"x": "\\", "y": "\u0025"}', map{'escape':
                  true()})</code> returns (with whitespace added for legibility):
            </p><pre><code><span class="es">&lt;</span><span class="en">map</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2005/xpath-functions</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="en">string</span><span class="z"> </span><span class="atn">escaped</span><span class="atneq">=</span><span class="z">"</span><span class="av">true</span><span class="z">"</span><span class="z"> </span><span class="atn">key</span><span class="atneq">=</span><span class="z">"</span><span class="av">x</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">\\</span><span class="ez">&lt;/</span><span class="cl">string</span><span class="ec">&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="en">string</span><span class="z"> </span><span class="atn">key</span><span class="atneq">=</span><span class="z">"</span><span class="av">y</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">%</span><span class="ez">&lt;/</span><span class="cl">string</span><span class="ec">&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">map</span><span class="ec">&gt;</span><span class="txt"></span></code></pre><p>The following example illustrates use of the <code>fallback</code> function to
               handle characters that are invalid in XML.
            </p><pre><code><span class="whitespace"> </span><span class="higher">let</span><span class="whitespace"> 
   </span><span class="variable">$jsonstr</span><span class="whitespace"> </span><span class="op">:=</span><span class="whitespace"> </span><span class="function">unparsed-text</span><span class="parenthesis">(</span><span class="op">'</span><span class="literal">http://example.com/endpoint</span><span class="op">'</span><span class="parenthesis">)</span><span class="op">,</span><span class="whitespace">
   </span><span class="variable">$options</span><span class="whitespace"> </span><span class="op">:=</span><span class="whitespace"> </span><span class="qname">map</span><span class="whitespace"> </span><span class="op">{</span><span class="whitespace">
     </span><span class="op">'</span><span class="property">liberal</span><span class="op">'</span><span class="op">:</span><span class="whitespace"> </span><span class="function">true</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="op">,</span><span class="whitespace">
     </span><span class="op">'</span><span class="property">fallback</span><span class="op">'</span><span class="op">:</span><span class="whitespace"> </span><span class="type">function</span><span class="parenthesis">(</span><span class="variable">$char</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span><span class="whitespace"> </span><span class="op">{</span><span class="whitespace">
       </span><span class="higher">let</span><span class="whitespace"> 
         </span><span class="variable">$c0chars</span><span class="whitespace"> </span><span class="op">:=</span><span class="whitespace"> </span><span class="qname">map</span><span class="whitespace"> </span><span class="op">{</span><span class="whitespace">
           </span><span class="op">'</span><span class="property">\u0000</span><span class="op">'</span><span class="op">:</span><span class="op">'</span><span class="literal">[NUL]</span><span class="op">'</span><span class="op">,</span><span class="whitespace">
           </span><span class="op">'</span><span class="property">\u0001</span><span class="op">'</span><span class="op">:</span><span class="op">'</span><span class="literal">[SOH]</span><span class="op">'</span><span class="op">,</span><span class="whitespace">
           </span><span class="op">'</span><span class="property">\u0002</span><span class="op">'</span><span class="op">:</span><span class="op">'</span><span class="literal">[STX]</span><span class="op">'</span><span class="op">,</span><span class="whitespace">
           </span><span class="context">..</span><span class="context">.</span><span class="whitespace">
           </span><span class="op">'</span><span class="property">\u001E</span><span class="op">'</span><span class="op">:</span><span class="op">'</span><span class="literal">[RS]</span><span class="op">'</span><span class="op">,</span><span class="whitespace">
           </span><span class="op">'</span><span class="property">\u001F</span><span class="op">'</span><span class="op">:</span><span class="op">'</span><span class="literal">[US]</span><span class="op">'</span><span class="whitespace">
         </span><span class="op">}</span><span class="op">,</span><span class="whitespace">
         </span><span class="variable">$replacement</span><span class="whitespace"> </span><span class="op">:=</span><span class="whitespace"> </span><span class="function">$c0chars</span><span class="parenthesis">(</span><span class="variable">$char</span><span class="parenthesis">)</span><span class="whitespace">
      </span><span class="op">return</span><span class="whitespace"> 
        </span><span class="if">if</span><span class="whitespace"> </span><span class="parenthesis">(</span><span class="function">exists</span><span class="parenthesis">(</span><span class="variable">$replacement</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="whitespace">
        </span><span class="op">then</span><span class="whitespace"> </span><span class="variable">$replacement</span><span class="whitespace">
        </span><span class="op">else</span><span class="whitespace"> </span><span class="function">error</span><span class="parenthesis">(</span><span class="function">xs:QName</span><span class="parenthesis">(</span><span class="op">'</span><span class="literal">err:invalid-char</span><span class="op">'</span><span class="parenthesis">)</span><span class="op">,</span><span class="whitespace"> 
          </span><span class="op">'</span><span class="literal">Error: </span><span class="op">'</span><span class="whitespace"> </span><span class="op">||</span><span class="whitespace"> </span><span class="variable">$char</span><span class="whitespace"> </span><span class="op">||</span><span class="whitespace"> </span><span class="op">'</span><span class="literal"> is not a C0 control character.</span><span class="op">'</span><span class="parenthesis">)</span><span class="whitespace">
     </span><span class="op">}</span><span class="whitespace">
   </span><span class="op">}</span><span class="whitespace">
 </span><span class="op">return</span><span class="whitespace"> </span><span class="function">json-to-xml</span><span class="parenthesis">(</span><span class="variable">$jsonstr</span><span class="op">,</span><span class="whitespace"> </span><span class="variable">$options</span><span class="parenthesis">)</span></code></pre></section>
         <footer>
            <h2>See Also</h2>
            <ul>
               <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml">XPath 3.1 Functions and Operators</a></li>
               <li><a href="http://www.saxonica.com/html/documentation/functions/fn/json-to-xml.html">Saxon Function Library</a></li>
            </ul>
         </footer>
      </article>
      <footer>
         <div class="container"><small class="copyright">Portions of this document were copied from <a href="https://www.w3.org/TR/2017/REC-xpath-functions-31-20170321/xpath-functions-31.xml">this file</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>&nbsp;©&nbsp;2014&nbsp;<a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved.</small></div>
      </footer>
   </body>
</html>