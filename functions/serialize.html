<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /><title>fn:serialize</title><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" /><link rel="stylesheet" href="../css/site.css" /><link rel="shortcut icon" href="../favicon.ico" /></head><body><div class="container"><ol class="breadcrumb"><li><a href="../">XPath Reference</a></li><li class="active">fn:serialize</li></ol><h1 class="page-header">fn:serialize</h1><p>This function serializes the supplied input
               sequence
            <code>$arg</code> as described in <a href="http://www.w3.org/TR/xslt-xquery-serialization-30/">[XSLT and XQuery Serialization 3.0]</a>,
            returning the serialized representation of the
               sequence as a string.</p><h2>Signatures</h2><p><pre><code class="signature"><span class="function">fn:serialize</span><span class="parenthesis">(</span><span class="variable">$arg</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">*</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span></code></pre><pre><code class="signature"><span class="function">fn:serialize</span><span class="parenthesis">(</span><span class="whitespace">&#xD;
    </span><span class="variable">$arg</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type">item</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">*</span><span class="op">,</span><span class="whitespace"> &#xD;
    </span><span class="variable">$params</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="node-type">element</span><span class="parenthesis">(</span><span class="qname">output:serialization-parameters</span><span class="parenthesis">)</span><span class="quantifier">?</span><span class="whitespace">&#xD;
</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span></code></pre></p><h2>Properties</h2><p>This function is <a href="http://www.w3.org/TR/xpath-functions-30/#dt-deterministic">deterministic</a>, <a href="http://www.w3.org/TR/xpath-functions-30/#dt-context-independent">context-independent</a>,  and <a href="http://www.w3.org/TR/xpath-functions-30/#dt-focus-independent">focus-independent</a>. </p><h2>Rules</h2><p>The value of <code>$arg</code> acts as the input sequence to the serialization process,
            which starts with sequence normalization.</p><p>The single-argument version of this function has the same effect as
            the two-argument version called with <code>$params</code> set to an empty sequence. This
            in turn is the same as the effect of passing an
               <code>output:serialization-parameters</code> element with no child elements.</p><p>The <code>$params</code> argument is used to identify a set of
            serialization parameters. These are supplied in the form of an
               <code>output:serialization-parameters</code> element, having the format described in
               <a href="http://www.w3.org/TR/xslt-xquery-serialization-30/#serparams-in-xdm-instance">Setting Serialization Parameters by Means of a Data Model Instance</a>.</p><p>The final stage of serialization, that is, encoding, is skipped. If the serializer does
            not allow this phase to be skipped, then the sequence of octets returned by the
            serializer is decoded into a string by reversing the character encoding performed in the
            final stage.</p><h2>Error Conditions</h2><p>If the host language makes serialization an optional feature and
         the implementation does not support serialization, then a dynamic error
            [<a href="http://www.w3.org/TR/xpath-functions-30/#ERRFODC0010">ERRFODC0010</a>] is raised.</p><p>The serialization process will raise an error if <code>$arg</code> is an attribute or
            namespace node.</p><p>If any serialization error occurs, including the detection of an invalid value for a
            serialization parameter, this results in the <code>fn:serialize</code> call failing with
            a dynamic error.</p><h2>Notes</h2><p>One use case for this function arises when there is a need to construct an XML document
            containing nested XML documents within a CDATA section (or on occasions within a
            comment). See <code>fn:parse-xml</code> for further details.</p><p>Another use case arises when there is a need to call an extension function that expects
            a lexical XML document as input.</p><p>There are also use cases where the application wants to post-process the output of a
            query or transformation, for example by adding an internal DTD subset, or by inserting
            proprietary markup delimiters such as the <code>&lt;% ... %&gt;</code> used by some
            templating languages.</p><h2>Examples</h2><p>Given the output parameters:</p><p>let <code>$params</code> := <pre><code><span class="es">&lt;</span><span class="en">output:serialization-parameters</span><span class="z"> </span><span class="atn">xmlns:output</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2010/xslt-xquery-serialization</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="en">output:omit-xml-declaration</span><span class="z"> </span><span class="atn">value</span><span class="atneq">=</span><span class="z">"</span><span class="av">yes</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">output:serialization-parameters</span><span class="ec">&gt;</span><span class="txt">
         </span></code></pre></p><p>let <code>$data</code> := <pre><code><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">b</span><span class="atneq">=</span><span class="z">'</span><span class="av">3</span><span class="z">'</span><span class="sc">/&gt;</span><span class="txt">
         </span></code></pre></p><p>The following call might produce the output shown:</p><p>The expression <code>fn:serialize($data, $params)</code> returns <code>'&lt;a b="3"/&gt;'</code>.</p><section><h2>See Also</h2><ul><li><a href="http://www.w3.org/TR/xpath-functions-30/#func-serialize">XPath and XQuery Functions and Operators 3.0</a></li><li><a href="http://www.saxonica.com/documentation/html/functions/fn/serialize.html">Saxon Function Library</a></li></ul></section></div><footer><div class="container"><small class="copyright">Portions of this document were copied from <a href="http://www.w3.org/TR/2014/REC-xpath-functions-30-20140408/xpath-functions-30.xml">XPath and XQuery Functions and Operators 3.0</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>&nbsp;©&nbsp;2014&nbsp;<a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved.</small></div></footer></body></html>