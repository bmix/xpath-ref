<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /><title>fn:format-integer</title><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" /><link rel="stylesheet" href="../css/site.css" /><link rel="shortcut icon" href="../favicon.ico" /></head><body><div class="container"><ol class="breadcrumb"><li><a href="../">XPath Reference</a></li><li class="active">fn:format-integer</li></ol><h1 class="page-header">fn:format-integer</h1><p>Formats an integer according to a given picture string, using the conventions
            of a given natural language if specified.</p><h2>Signatures</h2><p><pre><code class="signature"><span class="function">fn:format-integer</span><span class="parenthesis">(</span><span class="whitespace">&#xD;
    </span><span class="variable">$value</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:integer</span><span class="quantifier">?</span><span class="op">,</span><span class="whitespace"> &#xD;
    </span><span class="variable">$picture</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span><span class="whitespace">&#xD;
</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span></code></pre><pre><code class="signature"><span class="function">fn:format-integer</span><span class="parenthesis">(</span><span class="whitespace">&#xD;
    </span><span class="variable">$value</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:integer</span><span class="quantifier">?</span><span class="op">,</span><span class="whitespace"> &#xD;
    </span><span class="variable">$picture</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span><span class="op">,</span><span class="whitespace"> &#xD;
    </span><span class="variable">$lang</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span><span class="quantifier">?</span><span class="whitespace">&#xD;
</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:string</span></code></pre></p><h2>Properties</h2><p>The two-argument form of this function is <a href="http://www.w3.org/TR/xpath-functions-30/#dt-deterministic">deterministic</a>, <a href="http://www.w3.org/TR/xpath-functions-30/#dt-context-dependent">context-dependent</a>,  and <a href="http://www.w3.org/TR/xpath-functions-30/#dt-focus-independent">focus-independent</a>.  It depends on 
		default language.
	</p><p>The three-argument form of this function is <a href="http://www.w3.org/TR/xpath-functions-30/#dt-deterministic">deterministic</a>, <a href="http://www.w3.org/TR/xpath-functions-30/#dt-context-independent">context-independent</a>,  and <a href="http://www.w3.org/TR/xpath-functions-30/#dt-focus-independent">focus-independent</a>. </p><h2>Rules</h2><p>If <code>$value</code> is an empty sequence, the function returns a zero-length
            string.</p><p>In all other cases, the <code>$picture</code> argument describes the format in which
               <code>$value</code> is output.</p><p>The rules that follow describe how non-negative numbers are output. If the value of
               <code>$value</code> is negative, the rules below are applied to the absolute value of
               <code>$value</code>, and a minus sign is prepended to the result.</p><p>The value of <code>$picture</code> consists of a primary format token, 
            optionally followed
            by a format modifier. The primary format token is always present and <b>must not</b>
            be zero-length. If the string contains one or more semicolons then everything that
            precedes the last semicolon is taken as the primary format token and everything
            that follows is taken as the format modifier; if the string contains no
            semicolon then the entire picture is taken as the primary format token, and the
            format modifier is taken to be absent (which is equivalent to supplying a
            zero-length string).</p><p>The primary format token is classified as one of the following:</p><ul><li><p>A <i>decimal-digit-pattern</i> made up of <i>optional-digit-signs</i>,
                     <i>mandatory-digit-signs</i>, and <i>grouping-separator-signs</i>.</p><ul><li><p>The <i>optional-digit-sign</i> is the character "#".</p></li><li><p>A <i>mandatory-digit-sign</i> is a <a href="http://www.w3.org/TR/xpath-functions-30/#character">character</a> in Unicode category Nd. All
                           <i>mandatory-digit-signs</i> within the format token <b>must</b> be from the
                        same digit family, where a digit family is a sequence of ten consecutive
                        characters in Unicode category Nd, having digit values 0 through 9. Within
                        the format token, these digits are interchangeable: a three-digit number may
                        thus be indicated equivalently by <code>000</code>, <code>001</code>, or
                           <code>999</code>.</p></li><li><p>a <i>grouping-separator-sign</i> is a non-alphanumeric character, that
                        is a <a href="http://www.w3.org/TR/xpath-functions-30/#character">character</a> whose Unicode category is
                        other than Nd, Nl, No, Lu, Ll, Lt, Lm or Lo.</p></li></ul><p>If the primary format token contains at least one Unicode digit 
                  then it is taken as a decimal digit pattern, and in this case it <b>must</b>
                  match the regular expression <code>^((\p{Nd}|#|[^\p{N}\p{L}])+?)$</code>. If it contains
                  a digit but does not match this pattern, a dynamic error 
                  is raised [<a href="http://www.w3.org/TR/xpath-functions-30/#ERRFODF1310">ERRFODF1310</a>].</p><blockquote><p>If a semicolon is to be used as a grouping separator, then the primary
               format token as a whole must be followed by another semicolon, to ensure that
               the grouping separator is not mistaken as a separator between the primary format
               token and the format modifier.</p></blockquote><p>There <b>must</b> be at least one <i>mandatory-digit-sign</i>. There may be zero or
                  more <i>optional-digit-signs</i>, and (if present) these <b>must</b> precede all
                     <i>mandatory-digit-signs</i>. There may be zero or more
                     <i>grouping-separator-signs</i>. A <i>grouping-separator-sign</i> <b>must
                  not</b> appear at the start or end of the <i>decimal-digit-pattern</i>, nor
                  adjacent to another <i>grouping-separator-sign</i>.</p><p>The corresponding output format is a decimal number, using this digit family, with
                  at least as many digits as there are <i>mandatory-digit-signs</i> in the
                  format token. Thus, a format token <code>1</code> generates the sequence <code>0 1
                     2 ... 10 11 12 ...</code>, and a format token <code>01</code> (or equivalently,
                     <code>00</code> or <code>99</code>) generates the sequence <code>00 01 02 ...
                     09 10 11 12 ... 99 100 101</code>. A format token of <code>&amp;#x661;</code>
                  (Arabic-Indic digit one) generates the sequence <code>١</code> then <code>٢</code>
                  then <code>٣</code> ...</p><p>The <i>grouping-separator-signs</i> are handled as follows. The position of
                  grouping separators within the format token, counting backwards from the last
                  digit, indicates the position of grouping separators to appear within the
                  formatted number, and the character used as the <i>grouping-separator-sign</i>
                  within the format token indicates the character to be used as the corresponding
                  grouping separator in the formatted number. If <i>grouping-separator-signs</i>
                  appear at regular intervals within the format token, that is if the same grouping
                  separator appears at positions forming a sequence <i>N</i>, 2<i>N</i>,
                     3<i>N</i>, ... for some integer value <i>N</i> (including the case
                  where there is only one number in the list), then the sequence is extrapolated to
                  the left, so grouping separators will be used in the formatted number at every
                  multiple of <i>N</i>. For example, if the format token is <code>0'000</code>
                  then the number one million will be formatted as <code>1'000'000</code>, while the
                  number fifteen will be formatted as <code>0'015</code>.</p><p>The only purpose of <i>optional-digit-signs</i> is to mark the position of
                     <i>grouping-separator-signs</i>. For example, if the format token is
                     <code>#'##0</code> then the number one million will be formatted as
                     <code>1'000'000</code>, while the number fifteen will be formatted as
                     <code>15</code>. A grouping separator is included in the formatted number only
                  if there is a digit to its left, which will only be the case if either (a) the
                  number is large enough to require that digit, or (b) the number of
                     <i>mandatory-digit-signs</i> in the format token requires insignificant
                  leading zeros to be present.</p><blockquote><p>Numbers will never be truncated. Given the <i>decimal-digit-pattern</i>
                     <code>01</code>, the number three hundred will be output as <code>300</code>,
                     despite the absence of any <i>optional-digit-sign</i>.</p></blockquote></li><li><p>The format token <code>A</code>, which generates the sequence <code>A B C ... Z AA AB
                     AC...</code>.</p></li><li><p>The format token <code>a</code>, which generates the sequence <code>a b c ... z aa ab
                     ac...</code>.</p></li><li><p>The format token <code>i</code>, which generates the sequence <code>i ii iii iv v vi vii
                     viii ix x ...</code>.</p></li><li><p>The format token <code>I</code>, which generates the sequence <code>I II III IV V VI VII
                     VIII IX X ...</code>.</p></li><li><p>The format token <code>w</code>, which generates numbers written as lower-case words, for
                  example in English, <code>one two three four ...</code>
               </p></li><li><p>The format token <code>W</code>, which generates numbers written as upper-case words, for
                  example in English, <code>ONE TWO THREE FOUR ...</code>
               </p></li><li><p>The format token <code>Ww</code>, which generates numbers written as title-case words, for
                  example in English, <code>One Two Three Four ...</code>
               </p></li><li><p>Any other format token, which indicates a numbering sequence in which that token
                  represents the number 1 (one) (but see the note below).
                  
                  It is <a href="http://www.w3.org/TR/xpath-functions-30/#implementation-defined">implementation-defined</a> which
                  numbering sequences, additional to those listed above, are supported. If an
                  implementation does not support a numbering sequence represented by the given
                  token, it <b>must</b> use a format token of <code>1</code>.</p><blockquote><p>In some traditional numbering sequences additional signs are added to denote
                     that the letters should be interpreted as numbers; these are not included in
                     the format token. An example (see also the example below) is classical Greek
                     where a dexia keraia (x0374, ʹ) and sometimes an aristeri keraia
                     (x0375, ͵) is added.</p></blockquote></li></ul><p>For all format tokens other than the first kind above (one that consists of decimal
            digits), there <b>may</b> be <a href="http://www.w3.org/TR/xpath-functions-30/#implementation-defined">implementation-defined</a> lower and upper bounds on the range of numbers that
            can be formatted using this format token; indeed, for some numbering sequences there may
            be intrinsic limits. For example, the format token <code>&amp;#x2460;</code> (circled
            digit one, ①) has a range imposed by the Unicode character repertoire — 1 to 20 in
            Unicode versions prior to 4.0, increased in subsequent versions. For
            the numbering sequences described above any upper bound imposed by the implementation
               <b>must not</b> be less than 1000 (one thousand) and any lower bound must
            not be greater than 1. Numbers that fall outside this range <b>must</b> be
            formatted using the format token <code>1</code>.</p><p>The above expansions of numbering sequences for format tokens such as <code>a</code> and
               <code>i</code> are indicative but not prescriptive. There are various conventions in
            use for how alphabetic sequences continue when the alphabet is exhausted, and differing
            conventions for how roman numerals are written (for example, <code>IV</code> versus
               <code>IIII</code> as the representation of the number 4). Sometimes alphabetic
            sequences are used that omit letters such as <code>i</code> and <code>o</code>. This
            specification does not prescribe the detail of any sequence other than those sequences
            consisting entirely of decimal digits.</p><p>Many numbering sequences are language-sensitive. This applies especially to the sequence
            selected by the tokens <code>w</code>, <code>W</code> and <code>Ww</code>. It also
            applies to other sequences, for example different languages using the Cyrillic alphabet
            use different sequences of characters, each starting with the letter #x410 (Cyrillic
            capital letter A). In such cases, the <code>$lang</code> argument specifies which
            language's conventions are to be used. If the argument
            is specified, the value <b>should</b> be either an empty sequence
            or a value that would be valid for the <code>xml:lang</code> attribute (see <a href="http://www.w3.org/TR/xml/">[Extensible Markup Language (XML) 1.0 (Fifth Edition)]</a>).
            Note that this permits the identification of sublanguages based on country codes (from ISO 3166-1)
            as well as identification of dialects and regions within a country..</p><p>The set of languages
            for which numbering is supported is <a href="http://www.w3.org/TR/xpath-functions-30/#implementation-defined">implementation-defined</a>.
            If the <code>$lang</code> argument is absent, 
            or is set to an empty sequence, or is invalid, or is not a language supported by the
            implementation, then the number is formatted using the
            default language from the dynamic context. 
            </p><p>The format modifier <b>must</b>
            be a string that matches the regular expression <code>^([co](\(.+\))?)?[at]?$</code>. 
            That is, if it is present it must consist of one or more of
            the following, in  order:</p><ul><li><p>either <code>c</code> or <code>o</code>, optionally followed by
                  a sequence of characters enclosed between parentheses, to indicate cardinal or
                  ordinal numbering respectively, the default being cardinal numbering</p></li><li><p>either <code>a</code> or <code>t</code>, to indicate alphabetic
                  or traditional numbering respectively, the default being <a href="http://www.w3.org/TR/xpath-functions-30/#implementation-defined">implementation-defined</a>.</p></li></ul><p>If the <code>o</code> modifier is present, this indicates a request to output ordinal
            numbers rather than cardinal numbers. For example, in English, when used with the format
            token <code>1</code>, this outputs the sequence <code>1st 2nd 3rd 4th ...</code>, and
            when used with the format token <code>w</code> outputs the sequence <code>first second
            third fourth ...</code>.</p><p>The string of characters between the parentheses, if present, is used to
         select between other possible variations of cardinal or ordinal numbering sequences.
         The interpretation of this string is <a href="http://www.w3.org/TR/xpath-functions-30/#implemementation-defined">implementation-defined</a>. No error occurs
         if the implementation does not define any interpretation for the defined string.</p><p>For example, in some languages, ordinal numbers vary depending on the grammatical context:
            they may have different genders and may decline with the noun that they qualify.
            In such cases the string appearing in parentheses after the letter <code>o</code> may be
            used to indicate the variation of the ordinal number required. The way in which the
            variation is indicated will depend on the conventions of the language. For inflected
            languages that vary the ending of the word, the <b>recommended</b> approach is to indicate the
            required ending, preceded by a hyphen: for example in German, appropriate values are
               <code>o(-e)</code>, <code>o(-er)</code>, <code>o(-es)</code>, <code>o(-en)</code>. </p><p>It is <a href="http://www.w3.org/TR/xpath-functions-30/#implementation-defined">implementation-defined</a> what
            combinations of values of the format token, the language, and the cardinal/ordinal
            modifier are supported. If ordinal numbering is not supported for the combination of the
            format token, the language, and the string appearing in parentheses, the request is
            ignored and cardinal numbers are generated instead.</p><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">Example: Ordinal Numbering in Italian</h3></div><div class="panel-body"><p>The specification <code>"1;o(-º)"</code> with <code>$lang</code> equal to
                  <code>it</code>, if supported, should produce the sequence:</p><pre><code><span class="numeric">1</span><span class="qname">º</span><span class="whitespace"> </span><span class="numeric">2</span><span class="qname">º</span><span class="whitespace"> </span><span class="numeric">3</span><span class="qname">º</span><span class="whitespace"> </span><span class="numeric">4</span><span class="qname">º</span><span class="whitespace"> </span><span class="context">..</span><span class="context">.</span></code></pre><p>The specification <code>"Ww;o"</code> with <code>$lang</code> equal to
                  <code>it</code>, if supported, should produce the sequence:</p><pre><code><span class="op">Primo</span><span class="whitespace"> </span><span class="op">Secondo</span><span class="whitespace"> </span><span class="op">Terzo</span><span class="whitespace"> </span><span class="op">Quarto</span><span class="whitespace"> </span><span class="qname">Quinto</span><span class="whitespace"> </span><span class="context">..</span><span class="context">.</span></code></pre></div></div><p>The use of the <code>a</code> or <code>t</code>
               modifier disambiguates between numbering sequences that use letters. In many
            languages there are two commonly used numbering sequences that use letters. One
            numbering sequence assigns numeric values to letters in alphabetic sequence, and the
            other assigns numeric values to each letter in some other manner traditional in that
            language. In English, these would correspond to the numbering sequences specified by the
            format tokens <code>a</code> and <code>i</code>. In some languages, the first member of
            each sequence is the same, and so the format token alone would be ambiguous. In the absence of the <code>a</code> or <code>t</code> modifier,
               the default is <a href="http://www.w3.org/TR/xpath-functions-30/#implementation-defined">implementation-defined</a>.</p><h2>Error Conditions</h2><p>A dynamic error is raised [<a href="http://www.w3.org/TR/xpath-functions-30/#ERRFODF1310">ERRFODF1310</a>] if the format token is invalid,
            that is, if it violates any mandatory rules (indicated by an emphasized <b>must</b>
            or <b>required</b> keyword in the above rules). For example, the error is raised if
            the primary format token contains a digit but does not match the required regular expression.</p><h2>Notes</h2><p>Note the careful distinction between conditions that are errors and conditions
         where fallback occurs. The principle is that an error in the syntax of the format picture will be reported by
         all processors, while a construct that is recognized by some implementations but not others will never result
         in an error, but will instead cause a fallback representation of the integer to be used.</p><h2>Examples</h2><p>The expression <code>format-integer(123, '0000')</code> returns <code>"0123"</code>.</p><p><code>format-integer(123, 'w')</code> might return <code>"one hundred and
                  twenty-three"</code></p><p>The expression <code>format-integer(21, '1;o', 'en')</code> returns <code>"21st"</code>.</p><p><code>format-integer(14, 'Ww;o(-e)', 'de')</code> might return
                  <code>"Vierzehnte"</code></p><p>The expression <code>format-integer(7, 'a')</code> returns <code>"g"</code>.</p><p>The expression <code>format-integer(57, 'I')</code> returns <code>"LVII"</code>.</p><p>The expression <code>format-integer(1234, '#;##0;')</code> returns <code>"1;234"</code>.</p><section><h2>See Also</h2><ul><li><a href="http://www.w3.org/TR/xpath-functions-30/#func-format-integer">XPath and XQuery Functions and Operators 3.0</a></li><li><a href="http://www.saxonica.com/documentation/html/functions/fn/format-integer.html">Saxon Function Library</a></li></ul></section></div><footer><div class="container"><small class="copyright">Portions of this document were copied from <a href="http://www.w3.org/TR/2014/REC-xpath-functions-30-20140408/xpath-functions-30.xml">XPath and XQuery Functions and Operators 3.0</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>&nbsp;©&nbsp;2014&nbsp;<a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved.</small></div></footer></body></html>